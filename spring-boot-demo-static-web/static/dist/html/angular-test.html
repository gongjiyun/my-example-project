<!doctype html>
<html ng-app="myApp">
<head>
<meta charset="UTF-8">
<script src="../js/angular.js"></script>
</head>
<body>
	<script type="text/javascript">
		var app = angular.module('myApp', []);
	</script>
	<h1>计算</h1>
	<div ng-controller="InvoiceCntl">
		<b>Invoice:</b> <br> <br>
		<table>
			<tr>
				<td>Quantity</td>
				<td>Cost</td>
			</tr>
			<tr>
				<td><input type="integer" min="0" ng-model="qty" required></td>
				<td><input type="number" ng-model="cost" required></td>
			</tr>
		</table>
		<hr>
		<b>Total:</b> {{qty * cost | currency}}
		<script type="text/javascript">
			app.controller('InvoiceCntl', function($scope) {
				$scope.qty = 1;
				$scope.cost = 19;
			});
		</script>
	</div>
	<h1>计算</h1>
	<div ng-controller="FirstController">
		<h4>The simplest adding machine ever</h4>
		<button ng-click="add(1)" class="button">Add</button>
		<a ng-click="subtract(1)" class="button alert">Subtract</a>
		<h4>Current count: {{ counter }}</h4>
		<script type="text/javascript">
			app.controller('FirstController', function($scope) {
				$scope.counter = 0;
				$scope.add = function(amount) {
					$scope.counter += amount;
				};
				$scope.subtract = function(amount) {
					$scope.counter -= amount;
				};
			});
		</script>
	</div>
	<div ng-controller="interpolateController">
		<h4>chapter2</h4>
		<input ng-model="to" type="email" placeholder="Recipient" /> <br>
		<textarea ng-model="emailBody"></textarea>
		<pre>{{ previewText }}</pre>
		<script type="text/javascript">
			app.controller('interpolateController', function($scope,
					$interpolate) {
				$scope.$watch('emailBody', function(body) {
					if (body) {
						var template = $interpolate(body);
						$scope.previewText = template({
							to : $scope.to
						});
					}
				});
			});
		</script>
	</div>
	<h1>图片</h1>
	<div>
		<img ng-src="{{imgSrc}}" />
		<script type="text/javascript">
			app
					.run(function($rootScope, $timeout) {
						$timeout(
								function() {
									$rootScope.imgSrc = 'https://developer.android.com/studio/images/hero_image_studio.png';
								}, 2000);
					});
		</script>
	</div>
	<h1>作用域</h1>
	<div ng-controller="SomeController">
		{{ someModel.someValue }}
		<button ng-click="someAction()">Communicate to child</button>
		<div ng-controller="ChildController">
			{{ someModel.someValue }}
			<button ng-click="childAction()">Communicate to parent</button>
		</div>
		<script type="text/javascript">
			app.controller('SomeController', function($scope){
				$scope.someModel = {
						someValue: 'hello computer'
				}
				$scope.someAction = function(){
					$scope.someModel.someValue = 'hello human, from parent';
				}
			}).controller('ChildController', function($scope){
				$scope.childAction = function() {
					$scope.someModel.someValue = 'hello human, from child';
				};
			});
		</script>
	</div>
	<h1>API取值repeat</h1>
	<div ng-controller="datalistController">
		<li ng-repeat="user in users" ng-class="{even: !$even, odd: !$odd}">
			<span>{{user.name}}</span>&nbsp;<span>{{user.email}}</span>
		</li>
		<script type="text/javascript">
			app.controller('datalistController', function($scope, $http){
				$http({
					method : 'POST',
					url : '/api/listAllUsers'
				}).success(function(data) {
					$scope.users = data;
				}).error(function(data) {
					console.log('error');
				});
			});
		</script>
	</div>
</body>
</html>